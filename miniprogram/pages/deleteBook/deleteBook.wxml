<view class="container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="page-header">
    <text class="header-title">åˆ é™¤å›¾ä¹¦</text>
    <text class="header-desc">è¯·è°¨æ…é€‰æ‹©è¦åˆ é™¤çš„å›¾ä¹¦</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && books.length === 0}}">
    <text class="empty-icon">ğŸ“š</text>
    <text class="empty-text">æš‚æ— å›¾ä¹¦å¯åˆ é™¤</text>
  </view>

  <!-- å›¾ä¹¦åˆ—è¡¨ -->
  <view class="book-list">
    <view class="book-item" wx:for="{{books}}" wx:key="_id" wx:if="{{!loading}}">
      <!-- å›¾ä¹¦å°é¢ -->
      <view class="book-cover-container">
        <image
          class="book-cover"
          src="{{item.coverUrl || '/images/default-book.png'}}"
          mode="aspectFill"
        ></image>
      </view>

      <!-- å›¾ä¹¦ä¿¡æ¯ -->
      <view class="book-info">
        <view class="book-name-row">
          <text class="book-name">{{item.name}}</text>
          <view class="book-status {{item.status === 'available' ? 'avail' : (item.status === 'pending' ? 'pend' : 'borrow')}}">
            {{item.status === 'available' ? 'å¯å€Ÿé˜…' : (item.status === 'pending' ? 'å¾…å®¡æ‰¹' : 'å·²å€Ÿå‡º')}}
          </view>
        </view>
        <text class="book-author">ä½œè€…ï¼š{{item.author || 'æœªçŸ¥'}}</text>
        <text class="book-location" wx:if="{{item.location}}">ğŸ“ ä½ç½®ï¼š{{item.location}}</text>
      </view>

      <!-- åˆ é™¤æŒ‰é’® -->
      <view class="delete-btn-wrapper">
        <button
          class="delete-btn"
          bindtap="deleteBook"
          data-id="{{item._id}}"
          disabled="{{deletingBookIds.includes(item._id)}}"
        >
          <text wx:if="{{!deletingBookIds.includes(item._id)}}">ğŸ—‘ï¸ åˆ é™¤</text>
          <text wx:else>â³ åˆ é™¤ä¸­</text>
        </button>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{loading}}">
    <text class="loading-spinner"></text>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
</view>